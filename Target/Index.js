import p,{Apply as c,Merge as s}from"files-pipe";import{fileURLToPath as h}from"url";import l from"critters";const n=await import("./Option/Index.js");var P=(r={})=>{for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&r[e]===!0&&(r[e]=n[e]);const t=s(n,r),a=new Set;if(typeof t.Path<"u"&&(t.Path instanceof Array||t.Path instanceof Set))for(const e of t.Path)a.add(e);return{name:"astro-critters",hooks:{"astro:build:done":async({dir:e})=>{if(a.size||a.add(e),!!t.Critters)for(const f of a){const i=await c(o=>o instanceof URL?h(o):o,f);await(await(await(await new p(t.Cache,t.Logger).In(f)).By("**/*.html")).Not(t.Exclude)).Pipe(s(n.Action,{Wrote:async o=>new l(s(t.Critters,{path:i instanceof Map?i.keys().next().value:i,logLevel:(()=>{switch(t.Logger){case 0:return"silent";case 1:return"silent";case 2:return"info";default:return"info"}})()})).process(o.Buffer.toString())}))}}}}};export{n as Default,P as default};
